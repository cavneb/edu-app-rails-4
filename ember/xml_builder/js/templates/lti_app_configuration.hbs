<form {{action "buildXml" on="submit"}}>
  <div {{bindAttr class=":form-group errors.name:has-error"}}>
    <label>Name</label>
    {{input type="text" 
            value=title
            class="form-control" 
            data-placement="bottom"
            data-toggle="popover" 
            data-content="CONTENT NEEDED"}}
    <span class="help-block">{{errors.name}}</span>
  </div>
  <div {{bindAttr class=":form-group errors.launch_url:has-error"}}>
    <label>LTI Launch URL</label>
    {{input type="text" 
            value=launch_url 
            class="form-control" 
            placeholder="https://" 
            data-placement="bottom"
            data-toggle="popover" 
            data-content="CONTENT NEEDED"}}
    <span class="help-block">{{errors.launch_url}}</span>
  </div>
  <div class="form-group">
    <small class="text-muted pull-right">250 char max</small>
    <label>Description</label>
    {{input type="text" 
            value=description 
            class="form-control" 
            data-placement="bottom"
            data-toggle="popover" 
            data-content="CONTENT NEEDED"}}
  </div>
  <div class="form-group">
    <small class="text-muted pull-right">(16x16 PNG, GIF or JPG)</small>
    <label>Icon URL</label>
    {{input type="text" 
            value=icon_url 
            class="form-control" 
            data-placement="bottom"
            data-toggle="popover" 
            data-content="CONTENT NEEDED"}}
  </div>
  <div class="form-group">
    <small class="text-muted pull-right">lowercase, alphanumeric + underscore</small>
    <label>Unique Identifier</label>
    {{input type="text" 
            value=short_name 
            class="form-control" 
            data-placement="bottom"
            data-toggle="popover" 
            data-content='use underscore (_) for spaces and all lowercase, e.g. khan_academy'}}
  </div>
  <div class="form-group">
    <label>Link Text</label>
    {{input type="text" 
            value=default_link_text 
            class="form-control" 
            placeholder="" 
            data-placement="bottom"
            data-toggle="popover" 
            data-content="CONTENT NEEDED"}}
  </div>
  <div class="row">
    <div class="form-group col-6">
      <label>Default Width (px)</label>
      {{input type="text" 
              value=default_selection_width 
              class="form-control" 
              data-placement="bottom"
              data-toggle="popover" 
              data-content="CONTENT NEEDED"}}
    </div>
    <div class="form-group col-6">
      <label>Default Height (px)</label>
      {{input type="text" 
              value=default_selection_height 
              class="form-control" 
              data-placement="bottom"
              data-toggle="popover" 
              data-content="CONTENT NEEDED"}}
    </div>
  </div>
  <div class="form-group">
    <label>Launch Privacy</label>
    {{view Ember.Select
           contentBinding="App.launchPrivacy"
           optionValuePath="content.value"
           optionLabelPath="content.name"
           valueBinding=privacy_level
           class="form-control"
           data-placement="bottom"
           data-toggle="popover" 
           data-content="CONTENT NEEDED"}}
  </div>
  <div class="form-group">
    <label>Domain</label>
    {{input type="text" 
            value=domain 
            class="form-control" 
            placeholder="my.domain.com" 
            data-placement="bottom"
            data-toggle="popover" 
            data-content="CONTENT NEEDED"}}
  </div>

  <fieldset>
    <legend>
      <a href="#" {{action "addConfigOption"}} class="btn btn-xs btn-info pull-right"><i class="icon-plus"></i> Add Config Option</a>
      Config Options(s)
    </legend>
    <div class="form-group">
        {{#each co in config_options}}
          <div class="well well-small" style="padding-top: 5px; margin-bottom: 5px;">
            <div class="row">
              <div class="col-8">
                <div class="checkbox">
                  <label>
                    {{input type="checkbox" checked=co.is_required}}
                    Is this a required field?
                  </label>
                </div>
              </div>
              <div class="col-4">
                <button {{action "removeConfigOption" co}} type="button" class="close" aria-hidden="true" style="pull-right">&times;</button>
              </div>
            </div>
            <div class="row" style="margin-bottom: 5px;">
              <div class="col-4">
                {{input type="text" 
                        value=co.name 
                        class="form-control" 
                        placeholder="Param Name" 
                        data-placement="bottom"
                        data-toggle="popover" 
                        data-content="CONTENT NEEDED"}}
              </div>
              <div class="col-3">
                {{view Ember.Select
                        contentBinding="App.fieldTypes"
                        optionValuePath="content.value"
                        optionLabelPath="content.name"
                        valueBinding=co.type
                        class="form-control"
                        data-placement="bottom"
                        data-toggle="popover" 
                        data-content="CONTENT NEEDED"}}
              </div>
              <div class="col-5">
                {{input type="text" 
                        value=co.default_value 
                        class="form-control" 
                        placeholder="Default value"
                        data-placement="bottom"
                        data-toggle="popover" 
                        data-content="CONTENT NEEDED"}}
              </div>
            </div>
            <div class="row">
              <div class="col-12">
                {{input type="text" 
                        value=co.description 
                        class="form-control" 
                        placeholder="Description" 
                        data-placement="bottom"
                        data-toggle="popover" 
                        data-content="CONTENT NEEDED"}}
              </div>
            </div>
          </div>
        {{else}}
          <div class="text-center">There are no config options</div>
        {{/each}}
    </div>
  </fieldset>


  <fieldset>
    <legend>
      <a href="#" {{action "addCustomField"}} class="btn btn-xs btn-info pull-right"><i class="icon-plus"></i> Add Custom Field</a>
      Custom Field(s)
    </legend>
    <div class="form-group">
        {{#each cf in custom_fields}}
          <div class="well well-small" style="padding-top: 5px; margin-bottom: 5px;">
            <div class="row" style="margin-bottom: 5px;">
              <div class="col-12">
                <button {{action "removeCustomField" cf}} type="button" class="close" aria-hidden="true" style="pull-right">&times;</button>
              </div>
            </div>
            <div class="row" style="margin-bottom: 5px;">
              <div class="col-6">
                {{input type="text" 
                        value=cf.name
                        class="form-control" 
                        placeholder="Name" 
                        data-placement="bottom"
                        data-toggle="popover" 
                        data-content="CONTENT NEEDED"}}
              </div>
              <div class="col-6">
                {{input type="text" 
                        value=cf.value 
                        class="form-control" 
                        placeholder="Value"
                        data-placement="bottom"
                        data-toggle="popover" 
                        data-content="CONTENT NEEDED"}}
              </div>
            </div>
          </div>
        {{else}}
          <div class="text-center">There are no custom fields</div>
        {{/each}}
    </div>
  </fieldset>

  <fieldset>
    <legend>
      <label class="extension-checkbox pull-right">
        {{input type="checkbox" checked=editor_button.is_enabled}} Enabled?
      </label>
      Extension: Editor Button
    </legend>
    <div class="well well-small">
      {{#if editor_button.is_enabled}}
        {{#with editor_button}}
          {{partial "selectionForm"}}
        {{/with}}
      {{else}}
        <div class="text-center">Click the checkbox above to enable this extension</div>
      {{/if}}
    </div>
  </fieldset>

  <fieldset>
    <legend>
      <label class="extension-checkbox pull-right">
        {{input type="checkbox" checked=resource_selection.is_enabled}} Enabled?
      </label>
      Extension: Resource Selection
    </legend>
    <div class="well well-small">
      {{#if resource_selection.is_enabled}}
        {{#with resource_selection}}
          {{partial "selectionForm"}}
        {{/with}}
      {{else}}
        <div class="text-center">Click the checkbox above to enable this extension</div>
      {{/if}}
    </div>
  </fieldset>

  <fieldset>
    <legend>
      <label class="extension-checkbox pull-right">
        {{input type="checkbox" checked=homework_submission.is_enabled}} Enabled?
      </label>
      Extension: Homework Submission
    </legend>
    <div class="well well-small">
      {{#if homework_submission.is_enabled}}
        {{#with homework_submission}}
          {{partial "selectionForm"}}
        {{/with}}
      {{else}}
        <div class="text-center">Click the checkbox above to enable this extension</div>
      {{/if}}
    </div>
  </fieldset>

  <fieldset>
    <legend>
      <label class="extension-checkbox pull-right">
        {{input type="checkbox" checked=course_nav.is_enabled}} Enabled?
      </label>
      Extension: Course Navigation
    </legend>
    <div class="well well-small">
      {{#if course_nav.is_enabled}}
        {{#with course_nav}}
          <div class="form-group">
            <label>LTI Launch URL</label>
            {{input type="text" value=lti_launch_url class="form-control" placeholder="https://"}}
          </div>
          <div class="form-group">
            <label>Link Text</label>
            {{input type="text" value=link_text class="form-control" placeholder=""}}
          </div>
          <div class="form-group">
            <label>Visibility</label>
            {{view Ember.Select
                   contentBinding="App.visibilityOptions"
                   optionValuePath="content.value"
                   optionLabelPath="content.name"
                   valueBinding=visibility
                   class="form-control"}}
          </div>
          <div class="checkbox">
            <label>
              {{input type="checkbox" checked=enabledByDefault}}
              Enabled by default?
            </label>
          </div>
          <div class="checkbox">
            <label>
              {{input type="checkbox" checked=is_optional}} Is this extension optional?
            </label>
          </div>
        {{/with}}
      {{else}}
        <div class="text-center">Click the checkbox above to enable this extension</div>
      {{/if}}
    </div>
  </fieldset>

  <fieldset>
    <legend>
      <label class="extension-checkbox pull-right">
        {{input type="checkbox" checked=account_nav.is_enabled}} Enabled?
      </label>
      Extension: Account Navigation
    </legend>
    <div class="well well-small">
      {{#if account_nav.is_enabled}}
        {{#with account_nav}}
          {{partial "navigationForm"}}
        {{/with}}
      {{else}}
        <div class="text-center">Click the checkbox above to enable this extension</div>
      {{/if}}
    </div>
  </fieldset>

  <fieldset>
    <legend>
      <label class="extension-checkbox pull-right">
        {{input type="checkbox" checked=user_nav.is_enabled}} Enabled?
      </label>
      Extension: User Navigation
    </legend>
    <div class="well well-small">
      {{#if user_nav.is_enabled}}
        {{#with user_nav}}
          {{partial "navigationForm"}}
        {{/with}}
      {{else}}
        <div class="text-center">Click the checkbox above to enable this extension</div>
      {{/if}}
    </div>
  </fieldset>
</form>